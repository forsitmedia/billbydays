<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bill by Days ¬∑ Step 2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <!-- Canonical -->
  <link rel="canonical" href="https://billbydays.com/step2.html">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48.png?v=1">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png?v=1">
  <link rel="icon" type="image/x-icon" href="/favicon.ico?v=1">

  <!-- Apple -->
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon-180.png?v=1">

  <!-- PWA -->
  <link rel="manifest" href="/site.webmanifest?v=1">
  <meta name="theme-color" content="#3b82f6">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --green: #16a34a;
      --border: #e5e7eb;
      --text-main: #111827;
      --text-muted: #6b7280;
      --bg: #f8f9fb;
      --card-bg: #ffffff;
      --radius-lg: 22px;
      --shadow: 0 6px 18px rgba(0,0,0,0.05);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
    }

    body {
  background: var(--bg);
  min-height: 100vh;
  display: flex;
  justify-content: center;

  /* üëá same safe-area padding as Step 1 / Step 3, nicely centered */
  padding: calc(25px + env(safe-area-inset-top))
           20px
           calc(22px + env(safe-area-inset-bottom));
}





    .app {
      width: 100%;
      max-width: 520px;
    }

    /* HEADER */

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 22px;
    }

    .title-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .app-logo {
      width: 42px;
      height: 42px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
    }

    .app-title {
      font-size: 26px;
      font-weight: 700;
      margin-bottom: 2px;
      color: var(--text-main);
    }

    .app-subtitle {
      font-size: 14px;
      color: var(--text-muted);
    }

    .mode-pill {
  font-size: 12px;
  padding: 6px 14px;
  border-radius: 999px;
  border: 1px solid #d1d5db;
  background: #f3f4f6;
  color: #374151;
  white-space: nowrap;
  cursor: default;   /* NOT clickable on step 2 */
}


    /* CARDS */

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 20px;
      border: 1px solid var(--border);
      margin-bottom: 26px;
      box-shadow: var(--shadow);
    }

    /* SUMMARY CARD */

    .summary-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
      margin-bottom: 10px;
    }

    .summary-item-label {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 2px;
    }

    .summary-item-value {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-main);
    }

    /* Days-away badge (now inside the calendar card) */
.days-away {
  /* spacing */
  margin-top: 10px;       /* ‚Üì more space from "Mark the days..." */
  margin-bottom: 10px;    /* ‚Üë space before the calendar */

  /* positioning */
  align-self: center;    /* centers it within the header column */
  transform: translateX(35px); /* nudges it slightly to the right */

  display: inline-flex;
  align-items: center;
  gap: 8px;

  padding: 6px 12px;
  border-radius: 999px;

  font-weight: 600;
  font-size: 13px;

  /* low visibility by default */
  opacity: 0.25;

  /* uses roommate color via CSS variable */
  color: var(--rm-color, var(--text-main));
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);

  transition: opacity 0.2s ease, transform 0.2s ease;
}

.days-away.active {
  opacity: 1;
  transform: translateX(29px) translateY(-1px);
  border-color: color-mix(in srgb, var(--rm-color, #fff) 45%, transparent);
  background: color-mix(in srgb, var(--rm-color, #fff) 14%, transparent);
}



    /* CURRENT ROOMMATE HEADER */

    .rm-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}


    .rm-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      flex-shrink: 0;
    }

    .rm-name {
      font-size: 17px;
      font-weight: 600;
      color: var(--text-main);
    }

    .rm-sub {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* CALENDAR */

    .cal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      font-weight: 600;
      font-size: 15px;
    }

    .nav-btn {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #4b5563;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      margin-top: 8px;
    }

    .day-label {
      text-align: center;
      font-size: 12px;
      color: var(--text-muted);
    }

    .day {
      text-align: center;
      padding: 9px 0;
      border-radius: 10px;
      background: #f3f4f6;
      font-size: 15px;
      cursor: pointer;
      user-select: none;
      transition: background 0.12s ease, transform 0.12s ease;
    }

    .day:hover {
      transform: translateY(-1px);
    }

    .day.selected {
      color: white;
      font-weight: 600;
    }

    .day.start-hint {
      border: 2px dashed #94a3b8;
    }

    /* INSTRUCTIONS */

    .instructions {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.4;
      margin-top: 14px;
    }

    /* BUTTONS */

    .footer-buttons {
      margin-top: 18px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .back-btn {
      background: #e5e7eb;
      border: none;
      padding: 12px 16px;
      border-radius: 14px;
      font-weight: 600;
      cursor: pointer;
      font-size: 15px;
      color: #111827;
    }

    .continue-btn {
      background: var(--green);
      border: none;
      padding: 14px 18px;
      border-radius: 14px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      font-size: 15px;
    }

    /* =============== PRO THEME (same logic as index + step3) =============== */

    body.pro-mode {
      background: radial-gradient(circle at top, #4f46e5 0, #020617 55%);
    }

    body.pro-mode .card {
      background: #020617;
      border-color: #111827;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.55);
    }

    body.pro-mode .app-title {
      color: #e5e7eb;
    }

    body.pro-mode .app-subtitle {
      color: #a5b4fc;
    }

    body.pro-mode .summary-item-label,
    body.pro-mode .days-away,
    body.pro-mode .rm-sub,
    body.pro-mode .instructions,
    body.pro-mode .day-label {
      color: #9ca3af;
    }

    body.pro-mode .summary-item-value,
    body.pro-mode .rm-name,
    body.pro-mode #monthLabel {
      color: #e5e7eb;
    }

    body.pro-mode .day {
      background: #020617;
      border: 1px solid #1f2937;
      color: #e5e7eb;
    }

    body.pro-mode .day.start-hint {
      border-color: #4b5563;
    }

    body.pro-mode .nav-btn {
      color: #e5e7eb;
    }

    body.pro-mode .back-btn {
      background: #111827;
      color: #e5e7eb;
    }

    body.pro-mode .continue-btn {
      background: #16a34a;
    }

    body.pro-mode .mode-pill {
      background: #1e1b4b;
      border-color: #6366f1;
      color: #e5e7eb;
    }

    
.rm-header {
  position: relative; /* Needed for top-right absolute button */
}

.reset-days-btn {
  position: absolute;
  top: -10px;
  margin-top: 6px; 
  right: 1px;
  width: 24px;
  height: 24px;
  font-size: 20px;
  font-weight: 400;
  background: rgba(255, 255, 255, 0.18);
  border: none;
  border-radius: 20%;
  cursor: pointer;
  color: #e2e8f0; /* light gray */
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  transition: background 0.2s ease;
}

.reset-days-btn:hover {
  background: rgba(255, 255, 255, 0.28);
}

    
  </style>
</head>

<body>
  <div class="app">
    <header>
      <div class="title-left">
        <img src="logo.png" alt="Bill by Days logo" class="app-logo" />
        <div class="title-block">
          <div class="app-title">Bill by Days</div>
          <div class="app-subtitle">Step 2 ¬∑ Mark days each roommate was away</div>
        </div>
      </div>
     <div id="modePill" class="mode-pill">Free mode ¬∑ tap to simulate Pro</div>
    

    </header>

    <!-- SUMMARY CARD -->
    <section class="card">
      <div class="summary-grid">
        <div>
          <div class="summary-item-label">Total bill</div>
          <div class="summary-item-value" id="sumBill">‚Ç¨ 0</div>
        </div>
        <div style="text-align:right;">
          <div class="summary-item-label">Total days</div>
          <div class="summary-item-value" id="sumDays">0 days</div>
        </div>
        <div>
          <div class="summary-item-label">Roommates</div>
          <div class="summary-item-value" id="sumRmCount">0</div>
        </div>
        <div style="text-align:right;">
          <div class="summary-item-label">Overall Period</div>
          <div class="summary-item-value" id="sumPeriod">-</div>
        </div>
      </div>

      
      <div id="proPeriodExplanation" style="
  margin-top:6px;
  font-size:12px;
  color:#6b7280;
  display:none;
">
  We use the overall presence period that covers all your bills.
  Some bills may only cover part of these dates ‚Äî that‚Äôs handled automatically.
</div>

    </section>
    

    <!-- CURRENT ROOMMATE + CALENDAR -->
    <section class="card">
      <div class="rm-header">
        <!-- RESET BUTTON ‚Äì top right corner -->
    <button id="resetDaysBtn" class="reset-days-btn">√ó</button>
        <div class="rm-dot" id="rmDot"></div>
        <div>
          <div class="rm-name" id="rmName">Roommate
          </div>
          <div class="rm-sub" id="rmSub">
            Mark the days this roommate was not at home.
          </div>
          <div class="days-away" id="daysAwayText">
  0 days marked as away
</div>

        </div>
      </div>

      <div class="cal-header">
        <button class="nav-btn" id="prevMonth">‚Äπ</button>
        <div id="monthLabel"></div>
        <button class="nav-btn" id="nextMonth">‚Ä∫</button>
      </div>

      <div id="calendarGrid" class="calendar-grid"></div>

      <div class="instructions">
        <strong>Tap once</strong> to start a range.<br />
        <strong>Tap again</strong> to end the range.<br />
        <strong>Double-tap</strong> a day to toggle it individually.
      </div>

      <div class="footer-buttons">
         <button class="back-btn" id="backBtn">‚Üê Back</button>
        <button class="continue-btn" id="nextBtn">Next ‚Üí</button>
      </div>
    </section>
  </div>

  <script src="step2.js"></script>
</body>
</html>
